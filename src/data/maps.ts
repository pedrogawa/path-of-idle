import type { GameMap } from '../types';

export const maps: GameMap[] = [
  {
    id: 'twilightBeach',
    name: 'Twilight Beach',
    worldId: 1,
    order: 1,
    monsterLevel: 1,
    requiredMapId: null,
    monsterPool: ['drownedZombie', 'seaCrab', 'beachLurker'],
    killsRequired: 20,
    bossId: 'drownedCaptain',
    description: 'A haunted shoreline where the drowned sailors wander.',
    biome: 'beach',
  },
  {
    id: 'floodedCaves',
    name: 'Flooded Caves',
    worldId: 1,
    order: 2,
    monsterLevel: 3,
    requiredMapId: 'twilightBeach',
    monsterPool: ['drownedZombie', 'caveSpider', 'stalactiteBat'],
    killsRequired: 30,
    bossId: 'caveLurker',
    description: 'Dark caverns filled with icy seawater.',
    biome: 'cave',
  },
  {
    id: 'shipwreckGraveyard',
    name: 'Shipwreck Graveyard',
    worldId: 1,
    order: 3,
    monsterLevel: 5,
    requiredMapId: 'floodedCaves',
    monsterPool: ['pirateGhost', 'rottenDeckhand', 'seaCrab'],
    killsRequired: 35,
    bossId: 'ghostAdmiral',
    description: 'A treacherous reef where countless ships met their end.',
    biome: 'shipwreck',
  },
  {
    id: 'coralDepths',
    name: 'Coral Depths',
    worldId: 1,
    order: 4,
    monsterLevel: 8,
    requiredMapId: 'shipwreckGraveyard',
    monsterPool: ['deepCrawler', 'coralElemental', 'barnacleGolem'],
    killsRequired: 40,
    bossId: 'abyssalCrab',
    description: 'Beautiful yet deadly coral formations hide ancient predators.',
    biome: 'underwater',
  },
  {
    id: 'sunkenTemple',
    name: 'Sunken Temple',
    worldId: 1,
    order: 5,
    monsterLevel: 11,
    requiredMapId: 'coralDepths',
    monsterPool: ['templeGuardian', 'coralElemental', 'pirateGhost'],
    killsRequired: 45,
    bossId: 'templeGuardianBoss',
    description: 'An ancient temple lost beneath the waves.',
    biome: 'temple',
  },
  {
    id: 'tidalRuins',
    name: 'Tidal Ruins',
    worldId: 1,
    order: 6,
    monsterLevel: 15,
    requiredMapId: 'sunkenTemple',
    monsterPool: ['barnacleGolem', 'templeGuardian', 'rottenDeckhand'],
    killsRequired: 50,
    bossId: 'ruinedSentinel',
    description: 'Crumbling ruins where the tides never cease.',
    biome: 'ruins',
  },
  {
    id: 'sirensLair',
    name: "Siren's Lair",
    worldId: 1,
    order: 7,
    monsterLevel: 19,
    requiredMapId: 'tidalRuins',
    monsterPool: ['sirenServant', 'pirateGhost', 'coralElemental'],
    killsRequired: 55,
    bossId: 'sirenQueen',
    description: 'The enchanting domain of the Siren Queen.',
    biome: 'lair',
  },
  {
    id: 'krakensRest',
    name: "Kraken's Rest",
    worldId: 1,
    order: 8,
    monsterLevel: 24,
    requiredMapId: 'sirensLair',
    monsterPool: ['voidTentacle', 'abyssalHorror', 'deepCrawler'],
    killsRequired: 60,
    bossId: 'youngKraken',
    description: 'The breeding grounds of the legendary sea monsters.',
    biome: 'abyss',
  },
  {
    id: 'abyssalThrone',
    name: 'Abyssal Throne',
    worldId: 1,
    order: 9,
    monsterLevel: 30,
    requiredMapId: 'krakensRest',
    monsterPool: ['abyssalHorror', 'deepSeaLeviathan', 'voidTentacle'],
    killsRequired: 70,
    bossId: 'abyssalLord',
    description: 'The seat of power for the rulers of the deep.',
    biome: 'throne',
  },
  {
    id: 'theMaelstrom',
    name: 'The Maelstrom',
    worldId: 1,
    order: 10,
    monsterLevel: 36,
    requiredMapId: 'abyssalThrone',
    monsterPool: ['deepSeaLeviathan', 'abyssalHorror', 'voidTentacle'],
    killsRequired: 100,
    bossId: 'leviathan',
    description: 'The heart of the storm, where the Leviathan awaits.',
    biome: 'maelstrom',
  },
];

export const mapById = new Map(maps.map(m => [m.id, m]));

export const getUnlockedMaps = (defeatedBossMapIds: string[]): GameMap[] => {
  return maps.filter(map => {
    if (map.requiredMapId === null) return true;
    return defeatedBossMapIds.includes(map.requiredMapId);
  });
};
